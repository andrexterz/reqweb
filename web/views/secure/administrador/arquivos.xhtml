<ui:composition template="administrador.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="componentTitle">#{msg.arquivos}</ui:define>
    <ui:define name="content">
        <script>
            $(document).ready(function() {
                jQuery("#arquivosLnk").addClass("menuItemSelected");
            });
        </script>
        <ui:include src="disciplinasForm.xhtml" />
        <ui:include src="disciplinasPreviewForm.xhtml" />
        <ui:include src="excluiDisciplinaForm.xhtml" />
        <ui:include src="salvaDisciplinaForm.xhtml" />
        
        <ui:include src="turmasForm.xhtml" />
        <ui:include src="salvaTurmaForm.xhtml" />
        <ui:include src="excluiTurmaForm.xhtml" />
        
        <h:form class="contentTables" id="arquivoForm">
            <h:panelGroup layout="block" id="arquivoToolbar" styleClass="arquivoToolbar">
                <p:commandButton title="#{msg.disciplinas}"
                                 value="#{msg.disciplinas}"
                                 process="@this"
                                 update=":disciplinasForm:tableDisciplinas"
                                 oncomplete="PF('dlgDisciplinasFormVar').show()"
                                 icon="ui-icon-search" />

                <p:commandButton title="#{msg.turmas}"
                                 value="#{msg.turmas}"
                                 process="@this"
                                 oncomplete="PF('dlgTurmasFormVar').show()"
                                 icon="ui-icon-search" />

                <p:commandButton title="#{msg.indicePrioridade}"
                                 value="#{msg.indicePrioridade}"
                                 process="@this"
                                 icon="ui-icon-search" />                
            </h:panelGroup>
        </h:form>

        <h:panelGroup layout="block" styleClass="formBody contentTables">

            <h:form id="arquivosDisciplinasForm" enctype="multipart/form-data">
                <h:panelGroup id="disciplinas" layout="block">
                    <h:outputLabel for="inputDisciplinas" value="#{msg.disciplinas}" />
                    <p:commandLink id="previewImpDisciplinas"
                                   title="#{msg.disciplinasPrevisualizar}"
                                   disabled="#{!disciplinaBean.arquivoUploaded}"
                                   actionListener="#{disciplinaBean.setupImportDisciplinas}"
                                   update=":disciplinasPreviewForm:progressBarDisciplinas"
                                   oncomplete="handleImportDialog('dlgDisciplinasPreviewFormVar')">
                        <h:graphicImage value="#{resource['img/eye.png']}" styleClass="iconPreview" />
                    </p:commandLink>
                    <p:fileUpload id="inputDisciplinas"
                                  label="#{msg.selecionar}"
                                  uploadLabel="#{msg.enviar}"
                                  cancelLabel="#{msg.cancelar}"
                                  fileLimit="1"
                                  multiple="false"
                                  process="@form"
                                  oncomplete="PF('dlgDisciplinasPreviewFormVar').show()"
                                  fileUploadListener="#{disciplinaBean.uploadDisciplinas}"
                                  update=":disciplinasPreviewForm:confirmaImpDisciplinas :disciplinasPreviewForm:tablePreviewDisciplinas :disciplinasPreviewForm:progressBarDisciplinas :formHeader:systemMessages disciplinas" />
                </h:panelGroup>
            </h:form>
            <hr class="separator" />
            <h:form id="arquivosTurmasForm" enctype="multipart/form-data">
                <h:panelGroup id="turmas" layout="block">
                    <h:outputLabel for="inputTurmas" value="#{msg.turmas}" />
                    <p:commandLink title="#{msg.turmasPrevisualizar}">
                        <h:graphicImage value="#{resource['img/eye.png']}" styleClass="iconPreview" />
                    </p:commandLink>                    
                    <p:fileUpload id="inputTurmas"
                                  label="#{msg.selecionar}"
                                  uploadLabel="#{msg.enviar}"
                                  cancelLabel="#{msg.cancelar}"
                                  fileLimit="1"
                                  multiple="false"
                                  process="@form"
                                  update=":formHeader:systemMessages turmas" />
                </h:panelGroup>
            </h:form>                
            <hr class="separator" />
            <h:form id="arquivosPeriodoForm" enctype="multipart/form-data">
                <h:panelGroup id="indicePrioridade" layout="block">
                        <h:outputLabel for="inputIndicePrioridade" value="#{msg.indicePrioridade}" />
                        <p:commandLink title="#{msg.indicePrioridadePrevisualizar}">
                            <h:graphicImage value="#{resource['img/eye.png']}" styleClass="iconPreview" />
                        </p:commandLink>                        
                        <p:fileUpload id="inputIndicePrioridade"
                                      label="#{msg.selecionar}"
                                      uploadLabel="#{msg.enviar}"
                                      cancelLabel="#{msg.cancelar}"
                                      fileLimit="1"
                                      multiple="false"
                                      process="@this"
                                      update=":formHeader:systemMessages arquivosPeriodoForm" />
                </h:panelGroup>
            </h:form>
        </h:panelGroup>        
    </ui:define>
</ui:composition>

